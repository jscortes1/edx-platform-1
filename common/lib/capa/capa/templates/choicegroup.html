<form class="choicegroup capa_inputtype" id="inputtype_${id}" role="application">
    <div class="indicator_container">
    % if input_type == 'checkbox' or not value:
        <% 
        if status == 'unsubmitted' or show_correctness == 'never':
            classname = 'unanswered'
        elif status == 'incomplete':
            classname = 'incorrect'
        else:
            classname = status
        %>
    
        % if classname == 'unanswered':
        <span class="${classname}" style="display:inline-block;" id="status_${id}"></span>
        % else:
        <span class="${classname}" id="status_${id}"><span class="sr" aria-live="polite" aria-describedby="inputtype_${id}">${value} – ${status}</span></span>
        % endif:
    % endif
    </div>

    <fieldset role="radiogroup" aria-label="${label}">

        % for choice_id, choice_description in choices:
        <label for="input_${id}_${choice_id}"
            ## If the student has selected this choice...
            % if input_type == 'radio' and ( (isinstance(value, basestring) and (choice_id == value))  or  (not isinstance(value, basestring) and choice_id in value) ):
            <%
                if status == 'correct':
                    correctness = 'correct'
                elif status == 'incorrect':
                    correctness = 'incorrect'
                else:
                    correctness = None
            %>
            % if correctness and not show_correctness=='never':
            class="choicegroup_${correctness}"
            % endif
            % endif
            >
            <input type="${input_type}" name="input_${id}${name_array_suffix}" id="input_${id}_${choice_id}" aria-role="radio" aria-describedby="answer_${id}" value="${choice_id}"
            ## If the student selected this choice...
            % if input_type == 'radio' and ( (isinstance(value, basestring) and (choice_id == value))  or  (not isinstance(value, basestring) and choice_id in value) ):
            checked="true"
            % elif input_type != 'radio' and choice_id in value:
            checked="true"
            % endif

            /> ${choice_description}

            % if input_type == 'radio' and ( (isinstance(value, basestring) and (choice_id == value))  or  (not isinstance(value, basestring) and choice_id in value) ):
            <%
                if status == 'correct':
                    correctness = 'correct'
                elif status == 'incorrect':
                    correctness = 'incorrect'
                else:
                    correctness = None
            %>
            % if correctness and not show_correctness=='never':
            <span class="sr" aria-describedby="input_${id}_${choice_id}" aria-live="polite">${value|h} – ${correctness}</span>
            % endif
            % endif
        </label>
        % endfor
        <span id="answer_${id}" aria-live="assertive"></span>
    </fieldset>

    % if show_correctness == "never" and (value or status not in ['unsubmitted']):
    <div class="capa_alert">${submitted_message}</div>
    %endif
</form>
